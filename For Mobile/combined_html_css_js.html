<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Time Tracker</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Girassol&family=Lugrasimo&display=swap"
    rel="stylesheet">

  <style>
    :root {
      --bg: #070708;
      --panel: #0f1113;
      --muted: #9aa3ad;
      --red: #f87171;
      --blue: #60a5fa;
      --glass: rgba(255, 255, 255, 0.03);
      --glow-red: rgba(248, 113, 113, 0.16);
      --glow-blue: rgba(96, 165, 250, 0.14);
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      color: #eef2f7;
      background: var(--bg);
      line-height: 1.35;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale
    }

    /* Navbar */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: linear-gradient(180deg, #09090a 0%, #0f1113 100%);
      padding: 16px 26px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      box-shadow: 0 6px 30px var(--glow-red);
      position: sticky;
      top: 0;
      z-index: 40;
    }

    .nav-left {
      font-size: 1.35rem;
      font-weight: 800;
      color: var(--red);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      color: var(--blue);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      box-shadow: 0 0 14px var(--glow-blue);
    }

    .nav-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-btn {
      background: transparent;
      color: #e8eef8;
      border: 1px solid rgba(255, 255, 255, 0.03);
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-family: "Lugrasimo", cursive;
      font-weight: 400;
      font-style: normal;
      transition: transform .18s ease, box-shadow .18s ease, color .18s ease;
    }

    .nav-btn:hover {
      transform: translateY(-3px);
      color: var(--blue);
      box-shadow: 0 6px 20px var(--glow-blue);
    }

    /* Home Page */
    #homePage {
      max-width: 920px;
      margin: 24px auto;
      padding: 26px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.015));
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.02);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    #homePage h3 {
      font-family: "Girassol", serif;
    }

    #sessionHeading {
      margin: 6px 0 18px;
      text-align: center;
      font-size: 1.5rem;
      font-family: "Girassol", serif;
      color: #e9eef8;
      letter-spacing: 0.6px;
    }

    #timer {
      font-size: 56px;
      margin: 6px 0 18px;
      text-align: center;
      color: var(--blue);
      text-shadow: 0 0 18px rgba(96, 165, 250, 0.22);
      font-weight: 700;
    }

    .controls {
      text-align: center;
      margin-bottom: 22px;
    }

    button {
      padding: 10px 18px;
      margin: 6px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, var(--red), #3b82f6);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
      min-width: 86px;
    }

    button:disabled {
      background: #232529;
      color: #8b8f94;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    button:hover:enabled {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
    }

    /* Sessions */
    #sessions {
      margin: 18px auto;
      padding: 18px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.005));
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.02);
      max-width: 820px;
    }

    .session {
      background: var(--panel);
      padding: 14px;
      border-radius: 12px;
      margin: 14px 0;
      box-shadow: 0 6px 22px var(--glow-red);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      font-family: "Girassol", serif;
    }

    .session .left {
      line-height: 1.25;
      max-width: 78%;
    }

    .session strong {
      font-size: 1.05rem;
      color: var(--red);
      display: block;
    }

    .session .meta {
      color: var(--muted);
      font-size: 0.92rem;
      margin-top: 6px;
    }

    .deleteBtn {
      background: linear-gradient(180deg, #ef4444, #b91c1c);
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 13px;
      border: none;
      color: white;
    }

    .deleteBtn:hover {
      box-shadow: 0 6px 24px rgba(239, 68, 68, 0.18);
    }

    /* Add Record */
    .add-session {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.005));
      border: 1px dashed rgba(96, 165, 250, 0.18);
      padding: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 12px;
      font-family: "Lugrasimo", cursive;
      font-weight: 400;
      font-style: normal;
    }

    .add-session input[type=number] {
      width: 60px;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.03);
      text-align: center;
      background: #0b0b0b;
      color: #eef2f7;
    }

    /* Totals */
    #total,
    #monthTotal {
      font-weight: 800;
      margin-top: 22px;
      font-size: 1.9rem;
      font-family: "Girassol", serif;
      text-align: center;
      color: var(--red);
      text-shadow: 0 0 12px rgba(248, 113, 113, 0.18);
    }

    /* Calendar */
    #calendarPage {
      max-width: 860px;
      margin: 24px auto;
      padding: 20px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.005));
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.02);
    }

    .calendar-header {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }

    .calendar-header button {
      padding: 8px 12px;
      border-radius: 8px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.03);
      color: #e6ecf8;
      cursor: pointer;
    }

    .calendar-weekdays {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      max-width: 760px;
      margin: 6px auto;
      text-align: center;
      color: var(--blue);
      font-weight: 700;
      font-size: 0.92rem;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      max-width: 760px;
      margin: 8px auto 18px;
    }

    .day {
      background: var(--panel);
      border-radius: 10px;
      padding: 8px;
      min-height: 58px;
      text-align: left;
      box-shadow: 0 6px 18px var(--glow-red);
      cursor: pointer;
      transition: transform .14s ease, box-shadow .14s ease;
    }

    .day:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 30px var(--glow-blue);
    }

    .day.empty {
      background: transparent;
      box-shadow: none;
      cursor: default;
    }

    .day .date {
      font-weight: 700;
      color: #f5f5f5;
    }

    .day .hours {
      font-size: 0.82rem;
      margin-top: 6px;
      color: var(--blue);
    }

    .day.today {
      border: 2px solid var(--red);
      box-shadow: 0 0 18px rgba(248, 113, 113, 0.26);
    }

    button.fade {
      opacity: 0.3;
      pointer-events: none;
    }

    #currentTime {
      position: fixed;
      bottom: 14px;
      right: 14px;
      font-weight: 700;
      background: linear-gradient(180deg, #0b0b0b, #0f1113);
      color: var(--blue);
      padding: 8px 12px;
      border-radius: 12px;
      font-family: 'Orbitron', monospace;
      box-shadow: 0 8px 30px var(--glow-blue);
      border: 1px solid rgba(255, 255, 255, 0.02);
    }

    /* Responsive */
    @media (max-width:900px) {

      #homePage,
      #calendarPage {
        margin: 14px;
        padding: 16px;
      }

      #timer {
        font-size: 40px;
      }

      #total,
      #monthTotal {
        font-size: 1.4rem;
      }

      .calendar-grid,
      .calendar-weekdays {
        max-width: 100%;
        gap: 5px;
      }

      .session {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .session .left {
        max-width: 100%
      }
    }
  </style>
</head>

<body>

  <nav>
    <div class="nav-left"><span class="logo">‚è±</span> Time Tracker</div>
    <div class="nav-right">
      <button class="nav-btn" id="homeNav">Home</button>
      <button class="nav-btn" id="calendarNav">Calendar</button>
      <button class="nav-btn" id="exportBtn">Export</button>
      <button class="nav-btn" id="importBtn">Import</button>
      <input type="file" id="importFile" style="display:none;">
    </div>
  </nav>

  <section id="homePage">
    <h2 id="sessionHeading">Today's Sessions</h2>
    <h2 id="timer">00:00:00</h2>
    <div class="controls">
      <button id="startBtn">Start</button>
      <button id="pauseBtn" disabled>Pause</button>
      <button id="stopBtn" disabled>Stop</button>
      <button id="unlockBtn" style="display:none;opacity:1;">Unlock</button>
      <button id="lockBtn" style="display:none;opacity:0.3;">Lock</button>
    </div>
    <h3>Sessions</h3>
    <div id="sessions"></div>
    <div id="total" class="big-total">Daily Total: 0 hrs 0 mins 0 secs</div>
  </section>

  <section id="calendarPage" style="display:none;">
    <div class="calendar-header">
      <button id="prevMonth">‚¨Ö</button>
      <h2 id="monthYear"></h2>
      <button id="nextMonth">‚û°</button>
    </div>
    <div class="calendar-weekdays">
      <div>Sun</div>
      <div>Mon</div>
      <div>Tue</div>
      <div>Wed</div>
      <div>Thu</div>
      <div>Fri</div>
      <div>Sat</div>
    </div>
    <div class="calendar-grid" id="calendarGrid"></div>
    <div id="monthTotal" class="big-total">Monthly Total: 0 hrs 0 mins 0 secs</div>
  </section>

  <div id="currentTime"></div>

  <script>
    /* ===== Embedded JS (same as previous optimized version) ===== */
    let sessionStart = null, timerInterval = null, pauseStart = null, pausedDuration = 0;
    let currentDate = new Date(), unlocked = false;
    const startBtn = document.getElementById("startBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const stopBtn = document.getElementById("stopBtn");
    const unlockBtn = document.getElementById("unlockBtn");
    const lockBtn = document.getElementById("lockBtn");
    const timerDisplay = document.getElementById("timer");
    const sessionsDiv = document.getElementById("sessions");
    const totalDiv = document.getElementById("total");
    const sessionHeading = document.getElementById("sessionHeading");
    const homePage = document.getElementById("homePage");
    const calendarPage = document.getElementById("calendarPage");
    const homeNav = document.getElementById("homeNav");
    const calendarNav = document.getElementById("calendarNav");
    const monthYearLabel = document.getElementById("monthYear");
    const calendarGrid = document.getElementById("calendarGrid");
    const monthTotalDiv = document.getElementById("monthTotal");
    let currentMonth = new Date().getMonth(), currentYear = new Date().getFullYear();

    function formatTime(ms) { if (isNaN(ms) || ms <= 0) return "0 hrs 0 mins 0 secs"; const tS = Math.floor(ms / 1000); const h = Math.floor(tS / 3600); const m = Math.floor((tS % 3600) / 60); const s = tS % 60; return `${h} hrs ${m} mins ${s} secs`; }
    function formatClock(ms) { const tS = Math.floor(ms / 1000); const h = String(Math.floor(tS / 3600)).padStart(2, '0'); const m = String(Math.floor((tS % 3600) / 60)).padStart(2, '0'); const s = String(tS % 60).padStart(2, '0'); return `${h}:${m}:${s}`; }
    function keyForDate(d) { return d.toDateString(); }
    function newId() { return Date.now().toString(36) + Math.random().toString(36).slice(2, 8); }
    function isToday(d) { const t = new Date(); return d.getDate() === t.getDate() && d.getMonth() === t.getMonth() && d.getFullYear() === t.getFullYear(); }

    function updateLockButtons() { if (unlocked) { unlockBtn.style.opacity = "0.3"; unlockBtn.classList.add("fade"); lockBtn.style.opacity = "1"; lockBtn.classList.remove("fade"); } else { unlockBtn.style.opacity = "1"; unlockBtn.classList.remove("fade"); lockBtn.style.opacity = "0.3"; lockBtn.classList.add("fade"); } }

    function loadSessions() {
      const today = new Date(); const key = keyForDate(currentDate); if (currentDate > today) { sessionHeading.innerText = "‚ö†Ô∏è Future sessions not available"; sessionsDiv.innerHTML = ""; timerDisplay.innerText = "00:00:00"; startBtn.disabled = true; pauseBtn.disabled = true; stopBtn.disabled = true; unlockBtn.style.display = "none"; lockBtn.style.display = "none"; totalDiv.innerText = ""; return; }
      let sessions = JSON.parse(localStorage.getItem(key) || "[]"); sessionHeading.innerText = isToday(currentDate) ? "Today's Sessions" : `Sessions on ${currentDate.toDateString()}`; const lockTimer = !isToday(currentDate); startBtn.disabled = lockTimer; pauseBtn.disabled = lockTimer; stopBtn.disabled = lockTimer; unlockBtn.style.display = lockTimer ? "inline-block" : "none"; lockBtn.style.display = lockTimer ? "inline-block" : "none"; const display = [...sessions].sort((a, b) => b.end - b.start); sessionsDiv.innerHTML = ""; const addCard = document.createElement("div"); addCard.className = "session add-session"; addCard.innerHTML = `<div class="left"><strong>‚ûï Add Record</strong><br><input type="number" id="addHours" min="0" value="0"> h <input type="number" id="addMins" min="0" max="59" value="0"> m <input type="number" id="addSecs" min="0" max="59" value="0"> s</div><button class="addBtn">Add</button>`; const addBtn = addCard.querySelector(".addBtn"); addBtn.onclick = () => { if (lockTimer && !unlocked) { alert("‚ö†Ô∏è Unlock to edit past records."); return; } const hrs = parseInt(addCard.querySelector("#addHours").value || "0"); const mins = parseInt(addCard.querySelector("#addMins").value || "0"); const secs = parseInt(addCard.querySelector("#addSecs").value || "0"); const totalSec = hrs * 3600 + mins * 60 + secs; if (totalSec <= 0) { alert("‚ö†Ô∏è Enter a valid duration"); return; } if (!confirm(`Add a record of ${hrs} hrs ${mins} mins ${secs} secs?`)) return; const selectedDate = new Date(currentDate); selectedDate.setHours(0, 0, 0, 0); const start = selectedDate.getTime(); const end = start + totalSec * 1000; sessions.push({ id: newId(), start: start, end: end, paused: 0, custom: true }); localStorage.setItem(key, JSON.stringify(sessions)); loadSessions(); }; sessionsDiv.appendChild(addCard); let total = 0; display.forEach(s => { const duration = Math.max(0, (s.end || 0) - (s.start || 0) - (s.paused || 0)); total += duration; const div = document.createElement("div"); div.className = "session"; const left = document.createElement("div"); left.className = "left"; left.innerHTML = `<div><strong>${formatTime(duration)}</strong></div>`; if (!s.custom && s.start && s.end) left.innerHTML += `<div class="meta">üïí ${new Date(s.start).toLocaleTimeString()} - ${new Date(s.end).toLocaleTimeString()}</div>`; const del = document.createElement("button"); del.className = "deleteBtn"; del.textContent = "‚ùå Delete"; del.onclick = () => { if (lockTimer && !unlocked) { alert("‚ö†Ô∏è Unlock to delete past records."); return; } if (!confirm("‚ö†Ô∏è Delete this record?")) return; const idx = sessions.findIndex(x => x.id === s.id); if (idx !== -1) { sessions.splice(idx, 1); localStorage.setItem(key, JSON.stringify(sessions)); loadSessions(); } }; div.appendChild(left); div.appendChild(del); sessionsDiv.appendChild(div); }); totalDiv.innerText = "Daily Total: " + formatTime(total); updateLockButtons();
    }

    function startTimer() { if (!isToday(currentDate)) return; if (sessionStart === null) { sessionStart = Date.now(); pausedDuration = 0; pauseStart = null; } else if (pauseStart !== null) { pausedDuration += Date.now() - pauseStart; pauseStart = null; } startBtn.disabled = true; pauseBtn.disabled = false; stopBtn.disabled = false; pauseBtn.textContent = "Pause"; clearInterval(timerInterval); timerInterval = setInterval(() => { const elapsed = Date.now() - sessionStart - pausedDuration; timerDisplay.innerText = formatClock(Math.max(0, elapsed)); }, 1000); }
    function togglePause() { if (!isToday(currentDate)) return; if (!sessionStart) return; if (pauseStart === null) { clearInterval(timerInterval); pauseStart = Date.now(); pauseBtn.textContent = "Resume"; } else { pausedDuration += Date.now() - pauseStart; pauseStart = null; pauseBtn.textContent = "Pause"; startTimer(); } }
    function stopTimer() { if (!isToday(currentDate)) return; if (!sessionStart) return; if (pauseStart !== null) { pausedDuration += Date.now() - pauseStart; pauseStart = null; } clearInterval(timerInterval); const sessionObj = { id: newId(), start: sessionStart, end: Date.now(), paused: pausedDuration }; const key = keyForDate(currentDate); let sessions = JSON.parse(localStorage.getItem(key) || "[]"); sessions.push(sessionObj); localStorage.setItem(key, JSON.stringify(sessions)); sessionStart = null; pausedDuration = 0; timerDisplay.innerText = "00:00:00"; startBtn.disabled = false; pauseBtn.disabled = true; stopBtn.disabled = true; pauseBtn.textContent = "Pause"; loadSessions(); }
    startBtn.onclick = startTimer; pauseBtn.onclick = togglePause; stopBtn.onclick = stopTimer;

    unlockBtn.onclick = () => { unlocked = true; updateLockButtons(); alert("‚úÖ You can now add/delete records for this day."); };
    lockBtn.onclick = () => { unlocked = false; updateLockButtons(); alert("üîí Records locked."); };

    function renderCalendar(month, year) { calendarGrid.innerHTML = ""; const firstDay = new Date(year, month, 1).getDay(); const daysInMonth = new Date(year, month + 1, 0).getDate(); monthYearLabel.textContent = `${new Date(year, month).toLocaleString('default', { month: 'long' })} ${year}`; let totalMonth = 0; let dailyTotals = {}; for (let key in localStorage) { if (!localStorage.hasOwnProperty(key)) continue; let sessions = []; try { sessions = JSON.parse(localStorage.getItem(key) || "[]"); } catch { } if (!Array.isArray(sessions)) continue; sessions.forEach(s => { if (!s.start || !s.end) return; let d = new Date(s.start); if (d.getMonth() === month && d.getFullYear() === year) { let dur = Math.max(0, (s.end || 0) - (s.start || 0) - (s.paused || 0)); if (!isNaN(dur)) { dailyTotals[d.getDate()] = (dailyTotals[d.getDate()] || 0) + dur; totalMonth += dur; } } }); } for (let i = 0; i < firstDay; i++) { let div = document.createElement("div"); div.className = "day empty"; calendarGrid.appendChild(div); } const today = new Date(); for (let d = 1; d <= daysInMonth; d++) { let div = document.createElement("div"); div.className = "day"; div.innerHTML = `<div class="date">${d}</div>`; if (dailyTotals[d]) div.innerHTML += `<div class="hours">${formatTime(dailyTotals[d])}</div>`; let dayDate = new Date(year, month, d); if (d === today.getDate() && month === today.getMonth() && year === today.getFullYear()) div.classList.add("today"); if (dayDate > today) { div.style.opacity = "0.4"; div.style.pointerEvents = "none"; } div.onclick = () => { currentDate = new Date(year, month, d); unlocked = false; loadSessions(); homePage.style.display = "block"; calendarPage.style.display = "none"; }; calendarGrid.appendChild(div); } monthTotalDiv.innerText = "Monthly Total: " + formatTime(totalMonth); }
    document.getElementById("prevMonth").onclick = () => { currentMonth--; if (currentMonth < 0) { currentMonth = 11; currentYear--; } renderCalendar(currentMonth, currentYear); };
    document.getElementById("nextMonth").onclick = () => { currentMonth++; if (currentMonth > 11) { currentMonth = 0; currentYear++; } renderCalendar(currentMonth, currentYear); };
    homeNav.onclick = () => { homePage.style.display = "block"; calendarPage.style.display = "none"; loadSessions(); };
    calendarNav.onclick = () => { homePage.style.display = "none"; calendarPage.style.display = "block"; renderCalendar(currentMonth, currentYear); };

    const exportBtn = document.getElementById("exportBtn");
    const importBtn = document.getElementById("importBtn");
    const importFile = document.getElementById("importFile");
    exportBtn.onclick = () => { const data = {}; for (let key in localStorage) { if (!localStorage.hasOwnProperty(key)) continue; try { data[key] = JSON.parse(localStorage.getItem(key)); } catch { } } const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" }); const url = URL.createObjectURL(blob); const a = document.createElement("a"); a.href = url; a.download = "study_records.json"; a.click(); URL.revokeObjectURL(url); };
    importBtn.onclick = () => { importFile.click(); };
    importFile.onchange = (e) => { const file = e.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = function (ev) { try { const data = JSON.parse(ev.target.result); for (let key in data) { localStorage.setItem(key, JSON.stringify(data[key])); } alert("‚úÖ Records imported successfully!"); loadSessions(); renderCalendar(currentMonth, currentYear); } catch { alert("‚ùå Invalid JSON file."); } }; reader.readAsText(file); };

    function updateClock() { const now = new Date(); const h = String(now.getHours()).padStart(2, '0'); const m = String(now.getMinutes()).padStart(2, '0'); const s = String(now.getSeconds()).padStart(2, '0'); document.getElementById("currentTime").innerText = `${h}:${m}:${s}`; }
    setInterval(updateClock, 1000); updateClock();

    loadSessions(); renderCalendar(currentMonth, currentYear);
  </script>

</body>

</html>